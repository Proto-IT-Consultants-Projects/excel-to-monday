import{defineProperty as t}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{__rest as e}from"../../../_virtual/_tslib.js";import{camelCase as o}from"lodash-es";import{getTestId as n,ComponentDefaultTestId as r}from"../../tests/testIds.js";import i from"classnames";import s,{useRef as a,useMemo as l,useCallback as c,useEffect as m}from"react";import{CSSTransition as u}from"react-transition-group";import p from"../Button/Button.js";import d from"../Text/Text.js";import f from"../Loader/Loader.js";import T from"../Flex/Flex.js";import v from"../Icon/Icons/components/CloseSmall.js";import E from"./ToastLink/ToastLink.js";import j from"./ToastButton/ToastButton.js";import{ToastType as y,ToastActionType as h}from"./ToastConstants.js";import{getIcon as N}from"./ToastHelpers.js";import{NOOP as L}from"../../utils/function-utils.js";import{getStyle as g}from"../../helpers/typesciptCssModulesHelper.js";import{withStaticProps as I}from"../../types/withStaticProps.js";import A from"./Toast.module.scss.js";import B from"../IconButton/IconButton.js";import C from"../../hooks/usePrevious/index.js";var O=I((function(I){var O=I.open,x=void 0!==O&&O,k=I.loading,S=void 0!==k&&k,_=I.autoHideDuration,b=void 0===_?null:_,w=I.type,H=void 0===w?y.NORMAL:w,M=I.icon,R=I.hideIcon,z=void 0!==R&&R,D=I.action,F=I.actions,P=I.children,X=I.closeable,G=void 0===X||X,U=I.onClose,K=void 0===U?L:U,Y=I.className,q=I.id,J=I.closeButtonAriaLabel,Q=void 0===J?"Close":J,V=I["data-testid"],W=a(null),Z=C(null==F?void 0:F.length),$=l((function(){return F?F.filter((function(t){return t.type===h.LINK})).map((function(t){var o=e(t,["type"]);return s.createElement(E,Object.assign({key:o.href,className:A.actionLink},o))})):null}),[F]),tt=l((function(){return void 0!==Z&&(null==F?void 0:F.length)!==Z}),[F,Z]),et=l((function(){return F?F.filter((function(t){return t.type===h.BUTTON})).map((function(o,n){var r=o.content,a=e(o,["type","content"]);return s.createElement(j,Object.assign({key:"alert-button-".concat(n),className:i(A.actionButton,t({},A.withTransition,tt))},a),r)})):null}),[F,tt]),ot=l((function(){return i(A.toast,g(A,o("type-"+H)),Y)}),[H,Y]),nt=c((function(){K&&K()}),[K]),rt=a(),it=c((function(t){K&&null!=t&&(clearTimeout(rt.current),rt.current=setTimeout((function(){nt()}),t))}),[nt,K]);m((function(){return x&&b>0&&it(b),function(){clearTimeout(rt.current)}}),[x,b,it]);var st=!z&&N(H,M),at=c((function(t){var e=t.style.width;t.style.width="auto";var o=getComputedStyle(t).width;t.style.width=e,t.style.width=o}),[]);return m((function(){W.current&&at(W.current)}),[P,at]),s.createElement(u,{in:x,classNames:{enterActive:A.enterActive,exitActive:A.exitActive},timeout:400,unmountOnExit:!0},s.createElement(d,{id:q,"data-testid":V||n(r.TOAST,q),type:d.types.TEXT2,element:"div",color:d.colors.FIXED_LIGHT,className:ot,role:"alert","aria-live":"polite",ref:W},st&&s.createElement("div",{className:i(A.icon)},st),s.createElement(T,{align:T.align.CENTER,gap:T.gaps.LARGE,className:A.content},s.createElement(T,{gap:T.gaps.MEDIUM,"data-testid":n(r.TOAST_CONTENT),className:A.textContent},s.createElement("span",null,P),$),(et||D)&&(et||D),S&&s.createElement(f,{size:f.sizes.XS})),G&&s.createElement(B,{className:i(A.closeButton),onClick:nt,size:p.sizes.SMALL,kind:p.kinds.TERTIARY,color:p.colors.FIXED_LIGHT,ariaLabel:Q,"data-testid":n(r.TOAST_CLOSE_BUTTON),icon:v,hideTooltip:!0})))}),{types:y,actionTypes:h});export{O as default};
//# sourceMappingURL=Toast.js.map
